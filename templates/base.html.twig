<!DOCTYPE html>
<html lang="{% block html_locale %}en{% endblock %}">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta http-equiv="X-UA-Compatible" content="ie=edge">
        <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
        <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
        <link rel="manifest" href="/site.webmanifest">
    {% block meta %}
        <title>{% block title %}{{ author }} // Portfolio{% endblock %}</title>
        {# Search Engine #}
        <meta name="author" content="{{ author }}">
        <meta name="description" content="{% block description %}Personal website{% endblock %}">
        <meta name="image" content="{% block meta_image %}{{ (website_url ~ asset('img/site_preview.png'))|sanitize_url }}{% endblock %}">
        {# Schema.org for Google #}
        <meta itemprop="name" content="{{ block('title') }}">
        <meta itemprop="description" content="{{ block('description') }}">
        <meta itemprop="image" content="{{ block('meta_image') }}">
        {# Twitter #}
        <meta name="twitter:card" content="summary_large_image">
        <meta name="twitter:site" content="@{{ github_user }}">
        <meta name="twitter:creator" content="@{{ github_user }}">
        <meta name="twitter:image" content="{{ block('meta_image') }}">
        {# Open Graph general #}
        <meta name="og:title" content="{{ block('title') }}">
        <meta name="og:description" content="{{ block('description') }}">
        <meta name="og:image" content="{{ block('meta_image') }}">
        <meta name="og:url" content="{{ (website_url ~ app.request.requestUri)|sanitize_url }}">
        <meta name="og:site_name" content="{{ author }}">
        <meta name="og:type" content="{% block og_type %}website{% endblock %}">
        <link rel="alternate" type="application/rss+xml" href="{{ path('blog_rss') }}" title="Rss feed for {{ website_url }}">
    {% endblock %}
        {% block stylesheets %}{% endblock %}
        {% block javascripts %}
            {% block importmap %}{{ importmap('app') }}{% endblock %}
            <script async src="https://analytics.xn--jibbarth-d1a.fr/script.js" data-website-id="{{ analytic_website_id }}" data-auto-track="false"></script>
        {% endblock %}
        <script>
            if (localStorage.theme === 'dark' || (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
                document.documentElement.classList.add('dark')
            } else {
                document.documentElement.classList.remove('dark')
            }
        </script>
    </head>
    <body class="flex flex-col min-h-screen bg-background font-sans">
        <header>
            {% block header %}
            <twig:navbar />
            <div class="relative pt-24 pb-12 overflow-hidden bg-background">
                 {# Background Image / Effect Area #}
                <div class="absolute inset-0 z-0">
                    {% block header_image %}
                         {% set bannerPhoto = unsplash_photo('website', 1600, 200) %}
                         <img
                            class="absolute inset-0 w-full h-full object-cover opacity-50"
                            src="{{ bannerPhoto.blurhash }}"
                            {{ stimulus_controller('symfony/ux-lazy-image/lazy-image', {
                                src: bannerPhoto.fullUrl
                            }) }}
                            alt="Banner"
                        >
                    {% endblock %}
                    {# Overlay to ensure text readability over potential banners #}
                     <div class="absolute inset-0 bg-background/60 backdrop-blur-[2px]"></div>
                </div>

                <div class="container mx-auto px-4 relative z-10">
                    <div class="flex flex-col md:flex-row items-center gap-8 md:gap-16">
                        {# Profile Picture (Constant) #}
                        <div class="relative group">
                            <div class="absolute -inset-1 bg-gradient-to-r from-primary to-secondary rounded-full blur opacity-50 group-hover:opacity-100 transition duration-1000 group-hover:duration-200"></div>
                            <div class="relative w-40 h-40 md:w-56 md:h-56 rounded-full overflow-hidden border-4 border-background ring-2 ring-border">
                                    {% set profile_path = 'https://avatars.githubusercontent.com/u/3168281?v=4' %}
                                    <img src="{{ profile_path }}" alt="{{ author }}" class="w-full h-full object-cover">
                            </div>
                        </div>

                        {# Text & Info Area #}
                        <div class="text-center md:text-left max-w-2xl flex-1">
                            {{ partial('certifications') }}
                            <p class="text-4xl md:text-6xl font-bold tracking-tight mb-4 text-foreground">
                                {{ author }}
                            </p>
                            <div class="text-xl text-muted-foreground mb-6 leading-relaxed">
                                ðŸ‡«ðŸ‡· Web developer
                                <div>{{ partial('social') }}</div>
                            </div>
                        </div>
                    </div>

                    {# Sub-profile / Page Title Area (Full Width, Centered if needed) #}
                    <div class="">
                        {% block sub_profile %}
                            <h1 class="hide">{{ author }}</h1>
                            {# Default: Interests (Left aligned relative to container, or centered?) #}
                            {# The original was inside the right column. If we move it out, we might want to keep it centered or align it with the text above? #}
                            {# Homepage interests usually looked good under the bio. Let's start with centering it or checking its content. #}
                             <div class="text-center md:text-left md:ml-[calc(14rem+4rem)]"> {# Attempt to align with right column on desktop? 14rem(56) + 4rem(gap-16) #}
                                {{ partial('interests') }}
                            </div>
                        {% endblock %}
                    </div>
                </div>
            </div>
            {% endblock %}
        </header>
        <main class="grow">
            {% block body %}{% endblock %}
        </main>
        <footer class="border-t border-border bg-muted/20">
            <div class="container mx-auto px-4 py-8">
                <div class="flex flex-col md:flex-row items-center justify-between gap-6 text-sm text-muted-foreground">
                    {# Left: Copyright #}
                    <div class="text-center md:text-left space-y-1">
                        <div class="font-medium text-foreground">Â© {{ 'now'|date('Y') }} {{ author }}</div>
                    </div>

                    {# Center: Generation Date (Tech/Mono style) #}
                    <div class="text-center">
                        <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-muted text-muted-foreground border border-border font-mono" title="Site generation time">
                            {{ ux_icon('heroicons:clock', {class: 'w-3 h-3 mr-1 opacity-70'}) }}
                            Generated {{ 'now'|format_datetime('medium', 'short') }}
                        </span>
                    </div>

                    {# Right: Socials #}
                    <div class="text-center md:text-right flex items-center justify-end gap-1">
                        {{ partial('social') }}
                    </div>
                </div>
            </div>
        </footer>
        {{ include('_partials/debug_bar.html.twig') }}
    </body>
</html>
