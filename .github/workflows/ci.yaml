name: CI

on:
    - pull_request

jobs:
    check:
        runs-on: ubuntu-latest
        name: Validate code
        steps:
            -
                name: Checkout 🛎️
                uses: actions/checkout@v2
                with:
                    persist-credentials: false
            - uses: shivammathur/setup-php@v2
              with:
                  php-version: 8.0
                  coverage: none
            - run: composer install --no-progress --ignore-platform-reqs
            - name: Grumphp
              run: vendor/bin/grumphp run --ansi
            - name: PHPInsights
              run: vendor/bin/phpinsights -n --ansi
